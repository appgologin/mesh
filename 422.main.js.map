{"version":3,"file":"422.main.js","mappings":"0pBAOMA,E,QAAWC,GAEjB,QAAAC,GAAA,EAAe,YACb,IACE,GAAiB,UAAbF,EAAsB,CACxB,IAAMG,EAAUC,IAAAA,UACVC,EAAWC,IAAAA,KAAUH,EAASI,EAAAA,GAA0B,kBAExDC,EAAAA,EAAAA,QAAOH,GACb,IAAMI,QAAaC,EAAAA,EAAAA,UAASL,EAAU,SAEtC,GAAII,EAAKE,SAAS,kBAAoB,gBAAgBC,KAAKH,GACzD,MAAO,GAGT,IAAOI,EAAGC,EAAaC,GAAgBN,EAAKO,MAAM,KAG9CC,EAAiBH,EAMrB,GAJIC,IACFE,EAAiB,GAAHC,OAAMJ,EAAW,KAAAI,OAAIH,IAGjCD,EAAa,CACf,IAAOK,EAASC,GAAYH,EAAeD,MAAM,KAC3CK,EAAkBD,aAAQ,EAARA,EAAUE,QAAQ,cAAe,IACzD,GAAI,QAAQV,KAAKO,IAAY,QAAQP,KAAKS,GACxC,MAAO,GAAPH,OAAUC,EAAO,KAAAD,OAAIG,EAEzB,CAEA,MAAO,EACT,CAEA,MAAO,EACT,CAAE,MAAOE,GACP,MAAO,EACT,CACF,G","sources":["webpack://GoLogin/./src/electron/utils/get-clientId-from-metadata.ts"],"sourcesContent":["import { access, readFile } from 'fs/promises';\r\nimport os from 'os';\r\nimport path from 'path';\r\n\r\nimport { GOLOGIN_BASE_FOLDER_NAME } from './path-platforms';\r\nimport { osPlatform } from './userOs';\r\n\r\nconst PLATFORM = osPlatform;\r\n\r\nexport default async (): Promise<string> => {\r\n  try {\r\n    if (PLATFORM === 'win32') {\r\n      const homedir = os.homedir();\r\n      const pathFile = path.join(homedir, GOLOGIN_BASE_FOLDER_NAME, 'metadata');\r\n\r\n      await access(pathFile);\r\n      const data = await readFile(pathFile, 'utf-8');\r\n\r\n      if (data.includes('GoLogin Setup') && /\\d+\\.\\d+\\.\\d+/.test(data)) {\r\n        return '';\r\n      }\r\n\r\n      const [_, firstIdPart, secondIdPart] = data.split('_');\r\n\r\n      // before we had file name like: gologin_123.456; now we have: gologin_123_456; but we support both\r\n      let clientIdString = firstIdPart;\r\n\r\n      if (secondIdPart) {\r\n        clientIdString = `${firstIdPart}.${secondIdPart}`;\r\n      }\r\n\r\n      if (firstIdPart) {\r\n        const [firstId, secondId] = clientIdString.split('.');\r\n        const formattedSecond = secondId?.replace(/\\s.*$|\\(.*$/, '');\r\n        if (/^\\d+$/.test(firstId) && /^\\d+$/.test(formattedSecond)) {\r\n          return `${firstId}.${formattedSecond}`;\r\n        }\r\n      }\r\n\r\n      return '';\r\n    }\r\n\r\n    return '';\r\n  } catch (error: unknown) {\r\n    return '';\r\n  }\r\n};\r\n"],"names":["PLATFORM","osPlatform","_asyncToGenerator","homedir","os","pathFile","path","GOLOGIN_BASE_FOLDER_NAME","access","data","readFile","includes","test","_","firstIdPart","secondIdPart","split","clientIdString","concat","firstId","secondId","formattedSecond","replace","error"],"sourceRoot":""}