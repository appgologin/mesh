{"version":3,"file":"694.main.js","mappings":"mtBAQMA,EAAUC,IAAAA,UAEVC,EAAyBC,IAAAA,KAAUH,EAASI,EAAAA,GADnB,oBAGlBC,EAAgB,eAAAC,EAAAC,KAAG,kBACxBC,EAAAA,EAAAA,OAAML,IAAAA,KAAUH,EAASI,EAAAA,IAA2B,CAAEK,WAAW,IACvE,IACMC,SADcC,OACcC,KAAI,SAAAC,GAAQ,OAC3CV,IAAAA,MAAWU,GAAUC,KAAMC,cAAcC,QAAQ,UAAW,IAAI,UAE7DC,EAAAA,EAAAA,WAAUf,EAAwBgB,KAAKC,UAAUT,GAAsB,CAAEU,KAAM,KACvF,IAAC,kBAP4B,OAAAd,EAAAe,MAAA,KAAAC,UAAA,KAShBC,EAAsB,eAAAC,EAAAjB,KAAG,YAEpC,WADwBkB,EAAAA,EAAAA,QAAOvB,GAAwBwB,MAAK,kBAAM,CAAI,IAAE,kBAAM,CAAK,KAEjF,MAAO,GAGT,IAAMC,SAAqBC,EAAAA,EAAAA,UAAS1B,EAAwB,SAAS2B,OAAM,iBAAM,IAAI,KAAGC,WAExF,OAAOZ,KAAKa,MAAMJ,EACpB,IAAC,kBATkC,OAAAH,EAAAH,MAAA,KAAAC,UAAA,I","sources":["webpack://GoLogin/./src/electron/utils/check-system-fonts.ts"],"sourcesContent":["import { access, mkdir, readFile, writeFile } from 'fs/promises';\r\nimport os from 'os';\r\nimport path from 'path';\r\n\r\nimport getSystemFonts from 'get-system-fonts';\r\n\r\nimport { GOLOGIN_BASE_FOLDER_NAME } from './path-platforms';\r\n\r\nconst HOMEDIR = os.homedir();\r\nconst SYSTEM_FONTS_FILE_NAME = 'system-fonts.txt';\r\nconst SYSTEM_FONTS_FILE_PATH = path.join(HOMEDIR, GOLOGIN_BASE_FOLDER_NAME, SYSTEM_FONTS_FILE_NAME);\r\n\r\nexport const checkSystemFonts = async (): Promise<void> => {\r\n  await mkdir(path.join(HOMEDIR, GOLOGIN_BASE_FOLDER_NAME), { recursive: true });\r\n  const fonts = await getSystemFonts();\r\n  const formattedFontsNames = fonts.map(fontPath =>\r\n    (path.parse(fontPath).base).toLowerCase().replace(/[-|\\s]/g, '_'));\r\n\r\n  await writeFile(SYSTEM_FONTS_FILE_PATH, JSON.stringify(formattedFontsNames), { mode: 0o666 });\r\n};\r\n\r\nexport const getSystemFontsFromFile = async (): Promise<[]> => {\r\n  const fileExist = await access(SYSTEM_FONTS_FILE_PATH).then(() => true, () => false);\r\n  if (!fileExist) {\r\n    return [];\r\n  }\r\n\r\n  const fileContent = (await readFile(SYSTEM_FONTS_FILE_PATH, 'utf-8').catch(() => '[]')).toString();\r\n\r\n  return JSON.parse(fileContent);\r\n};\r\n"],"names":["HOMEDIR","os","SYSTEM_FONTS_FILE_PATH","path","GOLOGIN_BASE_FOLDER_NAME","checkSystemFonts","_ref","_asyncToGenerator","mkdir","recursive","formattedFontsNames","getSystemFonts","map","fontPath","base","toLowerCase","replace","writeFile","JSON","stringify","mode","apply","arguments","getSystemFontsFromFile","_ref2","access","then","fileContent","readFile","catch","toString","parse"],"sourceRoot":""}